<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title></title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/jquery.sinaEmotion.css">
    <link rel="stylesheet" href="css/jquery.toast.css">
    <link rel="stylesheet" href="css/default.css">
    <script src="http://test.gu0018.com/scripts/jquery-1.10.2.min.js"></script>
    <script src="js/jquery.signalR-2.1.2.min.js"></script>
     <script src="js/hubs.js"></script>

    <script src="js/jquery.sinaEmotion.js"></script>
    <script src="js/jquery.toast.js"></script>
    <script src="js/default.js"></script>
</head>

<body>
    <div class="" style="background-color: #eee; height: 40%;position: relative;">
        <span class="count">
            在线：<span>0</span>
        </span>
    </div>
    <div class="content">
        <div class="msg-box">
            <ul>
                <li>欢迎<em>本伟</em>进入直播室</li>
                <li><span>本伟</span>游戏结束","好吧</li>
                <li><span>wx</span>66666</li>
            </ul>
        </div>
        <div class="present-wrapper hide">
            <ul>
                <li class="monkey"></li>
                <li class="rose"></li>
                <li class="stick"></li>
                <li class="kiss"></li>
                <li class="jewel"></li>
                <li class="car"></li>
                <li class="plane"></li>
                <li class="cannon"></li>
            </ul>
        </div>
        <form action="" onsubmit="return false;">
            <div class="msg-input flex">
                <input class="flex-item" type="text" placeholder="说点什么">
                <div id="face-btn">表情</div>
                <div id="present-btn">礼物</div>
            </div>
        </form>
    </div>
    <script type="text/javascript">
         $(function () {
            // 声明一个代理引用该集线器,记得$.connection.后面的方法首字母必须要小写,这也是我为什么使用别名的原因
            var chat = $.connection.myHub;
            // 这里是注册集线器调用的方法,和1.0不同的是需要chat.client后注册,1.0则不需要
            chat.client.BroadMsg = function (name) {
                // HTML编码的显示名称和消息。
                var encodedMsg = $('<div />').text(name).html();
                // 将消息添加到该页。
                $('#messsagebox').append('<li>' + encodedMsg + '</li>');
            };
            // 获取用户名称。
            //$('#username').html(prompt('请输入您的名称:', ''));
            $('#username').html('游客' + Math.random());
            // 设置初始焦点到消息输入框。
            $('#message').focus();

            // 启动连接,这里和1.0也有区别
            $.connection.hub.start().done(function () {
                $('#send').click(function () {
                    var message = $('#username').html() + ":" + $('#message').val()
                    // 这里是调用服务器的方法,同样,首字母小写
                    chat.server.sendMess(message);
                    // 清空输入框的文字并给焦点.
                    $('#message').val('').focus();
                    return false;
                });
                $('#Send100').click(function () {
                    var message = $('#username').html() + ":" + $('#message').val();
                    // 这里是调用服务器的方法,同样,首字母小写
                    for (var i = 0; i < 1000; i++) {
                        chat.server.sendMess(message);

                    }

                    // 清空输入框的文字并给焦点.
                    $('#message').val('').focus();
                    return false;
                });
            });
        });

    // 绑定表情
    $('#face-btn').SinaEmotion($('.msg-input  input'));

    function getNameByValue(val, arr) {
        var result = "";
        for (var i = 0; i < arr.length; i++) {
            if (arr[i].value == val) {
                result = arr[i].name;
                break;
            }
        }
        return result;
    }

    var p_name_list = [{ name: "猴子", value: "monkey" }, { name: "玫瑰", value: "rose" }, { name: "魔法棒", value: "stick" }, { name: "红唇", value: "kiss" }, { name: "钻石", value: "jewel" }, { name: "跑车", value: "car" }, { name: "飞机", value: "plane" }, { name: "大炮", value: "cannon" }];

    function getRandomNum(Min, Max) {
        var Range = Max - Min;
        var Rand = Math.random();
        return (Min + Math.round(Rand * Range));
    }
    (function cheat(plusSection, subSection, max, $ele) {
        var add = setInterval(function() {
            if (Math.random() > 0.4) {
                plus = getRandomNum(0, plusSection);
            } else {
                plus = -getRandomNum(0, subSection);
            }
            var r = Number($ele.html()) + plus;
            if (r > 0) {
                $ele.html(r);
            } else if (r > max) {
                clearInterval(add)
            }
        }, 1000);
    })(20, 10, 1000, $(".count span"));
    $("#present-btn").click(function(event) {
        $(".present-wrapper").toggleClass("hide");
    });
    $(".present-wrapper li").click(function(event) {
        $(".present-wrapper").addClass("hide");
        var p_icon = $(this).attr("class");
        var p_name = getNameByValue(p_icon, p_name_list);
        var username = "卢本伟牛逼";
        // /* Act on the event */
        $.toast({
            allowToastClose: false,
            loader: false,
            hideAfter: 5000,
            showHideTransition: 'slide',
            stack: 3,
            heading: username,
            text: '送出' + p_name,
            icon: p_icon, //monkey
        })
    });

    function out() {
        var inputText = $('.emotion').val();
        $('#out').html(AnalyticEmotion(inputText));
    }
    $(document).on("keydown", ".content input", function(event) {
        if (event.keyCode == 13) {
            var kw = $(this).val();
            var t = '<li><span>' + '我' + '</span>' + AnalyticEmotion(kw) + '</li>';
            $("ul").append(t);
            var h = $("ul").height()
            $(".msg-box").scrollTop(h);
            $(this).val("");
        }
    });



    var word = ["夜长梦多，你脱我就脱。", "水浅王八多，遍地是大哥。", "生死看淡，不服就干。", "真心不如红钞票，感情只是性的需要。", "玩的嗨，想的开，啪啪一顿小平拍。", "水不试不知深浅，人不交不知好歹。", "男人看手腕，女人看脸蛋。", "花前月下，不如花钱日下。", "名花虽有主，我来松松土。", "有钱男子汉，没钱汉子难世界那么乱，装纯给谁看。", "喊疼的不一定是处女，微笑的一定是婊子我视金钱为粪土，我爸视我为化粪池。", "大金链子小手表，一天三顿小烧烤。", "兄弟为手足，女人为衣服。", "谁动我手足，我扒谁衣服。", "不是谁离不开谁，是谁放不下谁。", "走过青春的夏天，谁还记得曾是哪年？人生苦短，必须性感。", "希望似火，失望如烟，人生如七处点火，八处冒烟。", "要输就输给追求，要嫁就嫁给幸福漫漫人生路，一直在迷路。", "上课了，这节物理，对不起了，下节课继续。", "我长的狠耐看，你得耐心看。", "我可以放弃选择，但是不能选择放弃。", "世界不肮脏，何来的悲伤？青楼满座，是因为人心寂寞。", "和人接触时间长了就越来越喜欢狗了，狗永远是狗，人有时不是人。", "花有百般红，人与狗不同。", "节约用水，尽量和女友一起洗澡用心的去爱你的邻居，不过不要让他老公知道。", "别给我发誓，我怕你遭雷劈小的时候我那玩具当朋友，长大后朋友拿我当玩具。", "令人难以自拔的除了牙齿还有爱情！人生像打电话，不是你先挂就是我先挂。", "我比较喜欢火影忍者，因为一死就死一村的日本人。", "不愿做奴隶的人民，愿意做人民币的奴隶。", "握不住的沙，干脆扬了它。", "累么？累就对了，舒服是留给死人的。", "女人长的漂亮是优势，活的漂亮是本事。", "如果我能原谅你的庸俗，那么你能原谅我的装逼么？哥从来不说人话，我只说神话。", "谁是谁的老公，都TM的是临时的。", "你搞艺术，我搞你，这叫深入艺术。", "哥混到现在拿的起放的下的只有筷子了。", "后悔的事我不做，我只做让你后悔的事。"];
    var first_name = ["大方", "年轻", "聪明", "雪白", "漂亮", "笔直", "固定", "平等", "优秀", "慌张", "俗气", "马虎", "博学", "主观", "明快", "高兴", "幸福", "清楚", "明确", "结实", "具体", "伟大 ", "勇敢 ", "坚强 ", "温柔", "平淡", " 简单", "固执", "醒目", " 干净", "傲慢", "倔强", "脆弱", "乐观", "爽朗", "豪放", "开朗", "爱笑", "娇柔", "友好", "活泼", "昂贵", "孤独", "好动", "愉快", "热情", "可亲", "健谈", "轻松", "机敏", "外向", "兴奋", "强烈", "率直", "语言", "行动", "善良", "文雅", "整洁", "内向", "沉静", "稳重", "顺从", "温和", "老实", "沉著", "和平", "体贴", "忠诚", "知足", "果断", "首领", "喜爱", "善变", "细节", "保守", "忠心", "调解", "自信", "独立", "不凡", "悠然", "从容", "迷人", "淡定", "海涵", "洋气", "高雅", "风度", "随和", "王者", "潇洒", "宽容", "迷茫", "困惑 ", "乏困 ", "疲倦", "大笑", "微笑", "淡笑", "讥笑", "傲笑", "讪笑", "傻笑", "嗤笑", "嘻笑", "奸笑", "狂笑", "狞笑", "憨笑", "苦笑", "惨笑", "嘲笑", "冷笑", "耻笑", "呆笑", "痴知", "淫笑", "揶揄", "粲然", "嫣然", "莞尔", "嘿嘿", "呵呵", "格格", "扑哧", "哑然", "大哭", "痛哭", "哀哭", "偷哭", "啼哭", "哭泣", "低泣", "饮泣", "啜泣", "泣诉", "悲咽", "鸣咽", "哽咽", "抽咽", "幽咽", "抽噎", "抽泣", "抽搭", "号啕", "嘘唏", "唏嘘", "泫然", "潸然", "潸潸", "呜呜", "瞥", "睁眼", "闲眼", "瞪眼", "眨眼", "乍看", "窥看", "窥视", "察看", "观看", "观察", "洞察", "视察", "瞻望", "瞻顾", "顾盼", "相觑", "一瞥", "凝视", "张望", "遥望", "凝望", "眺望", "远眺", "仰望", "鸟瞰", "俯瞰", "俯眺", "俯视", "怒视", "注视", "窥视", "斜视", "睥视", "乜视", "端视", "端量", "瞥见", "蒙眬", "迷离", "昏眩", "瞪瞪", "眈眈", "巴望", "静听", "细听", "谛听", "收听", "旁听", "偷听", "打听", "恭听", "聆听", "恭聆", "静聆", "亲聆", "洗耳", "竖耳", "侧耳", "捉住", "抓住", "擒获", "相拥", "拥抱", "搂抱", "搀扶", "推拉", "揍", "捶打", "撞击", "撕咬", "撕扯", "撕打", "捧起", "托住", "抽打", "抬起", "扛起", "挑起", "捡拣", "拈住", "提起", "拎起", "鼓捣", "掏出", "掘进", "开挖", "撬动", "撒开", "撤离", "支撑", "掉下", "投入", "掷出", "抛出", "扔下", "摔倒", "擦拭", "揩抹", "摊开", "搔痒", "哄抢", "搜寻", "抡起", "拔起", "弹拨", "擂打", "揉捏", "扭打", "搓揉", "拿起", "举起", "劈开", "写字", "画画", "行走", "奔跑", "跳跃", "踢打", "跨越", "蹲下", "站立", "奔走", "奔逃", "奔赴", "奔腾", "逃遁", "跋涉", "徘徊", "彷徨", "徙倚", "逡巡", "匍匐", "踟躇", "踯躅", "蹒跚", "踉跄", "蹀躞", "蹉跌", "跄跄", "踽踽", "趑趄", "趔趄", "跳跃", "跳动", "蹦跳", "蹦达", "溜达", "雀跃", "欢跃", "挺立", "伫立", "散步", "漫步", "踏步", "信步", "转悠", "闲逛", "徜徉", "挺身", "俯身", "反身", "屈身", "侧身", "腾身", "躬身", "弯腰", "猫腰", "哈腰", "扭腰", "鞠躬", "蹲趴", "躺睡", "仰卧", "侧卧", "横卧", "俯卧", "蜷曲", "蜷缩", "辗转。表情动作:微笑", "愤怒", "惊讶", "吃惊", "惊奇", "恐惧", "失望", "沮丧", "兴奋", "痛苦", "痛哭", "疼痛", "心痛", "担忧", "焦虑", "忧虑", "忧郁", "开心", "急燥", "烦躁", "烦恼", "思考", "思索", "沉思", "上午", "下午", "过去", "将来", "早晨", "午夜", "三更", "甲戊", "世纪", "今天", "昨天", "行为", "跑步", "唱歌", "喝水", "敲门", "吆喝", "踢求", "生长", "枯萎", "发芽", "结果", "产卵", "喜欢", "气愤", "觉得", "思考", "厌恶", "存现", "消失", "显现", "丢失", "幻灭", "使令", "使人", "让座", "命令", "禁止", "勒令", "能愿", "如会", "愿意", "能够", "宁可", "表示", "状貌", "特征", "状态", "气急", "怒火", "高兴", "高大", "高瘦", "矮胖", "粗细", "强壮", "性质", "香甜", "漂亮", "圆滑", "机智", "单调", "快速", "浓厚", "肥满", "许多", "迅速", "悄悄", "量词", "单位", "公尺", "分寸", "公里", "公斤", "一两", "一辆", "一角", "一元", "一次", "一趟", "一下", "回声", "一幢", "一座", "代词", "代替", "我们", "你们", "它们", "她们", "大家", "咱们", "疑问", "谁的", "什么", "怎么", "哪里", "何以", "这里", "那里", "那边", "拟声", "模拟", "声音", "轰隆", "淅沥", "噼里", "啪啦", "哗啦", "叽喳", "啪拉", "哄堂", "开怀", "笑颜", "笑容", "喜笑", "欢声", "笑语", "眉开", "生气", "火冒", "雷霆", "欣喜", "心情", "词汇", "忧愁", "丧气", "雾气", "满腹", "满腔", "愁肠", "百结", "欲断", "寸断", "九转", "百愁", "心事", "阴郁", "忧心", "如焚", "愁绪", "夕颜", "秋恋", "蝉羽", "浴兰", "沉鱼", "落雁", "闭月", "羞花", "幽然", "静微", "艺雅", "卉馨", "轩然", "子茹", "萦绕", "流萤", "静谧", "流凨", "羽翼", "蔓延", "浅唱", "轻盈", "清芳", "黯淡", "纯洁", "涤荡", "皓月", "思琪", "绚烂", "郁葱", "寂寞", "尘世", "词语", "疼痛", "猜测", "奔腾", "丑陋", "长久", "模仿", "固定", "寒冷", "恐惧", "奇怪", "整齐", "漂浮", "特殊", "虚假", "遥望", "微弱", "消灭", "珍贵", "祝愿", "缠绕", "颤抖", "抚摩", "拉扯", "柔软", "明亮", "宽敞", "黑暗", "破旧", "美好", "飞翔", "挖掘", "搜索", "期待", "盼望", "祈祷", "微小", "捕捉", "思忖", "思量", "思想", "思念", "思绪", "思索", "思维", "思考", "思辨", "思路", "思慕", "思逸", "思齐", "思远", "思春", "思韵", "思虑", "思辩", "思玄", "思恋", "思凡", "思致", "思惟", "思潮", "思忆", "思元", "思绎", "思域", "思永", "思怀", "思越", "思纬", "思理", "思莼", "思服", "思咏", "思愆", "思议", "思秋", "思言", "馨香", "飘散", "舒展", "娇美", "神韵", "恬静", "醉人", "素雅", "娇嫩", "幽香", "淡雅", "朴素", "花瓣", "花蕊", "花粉", "鲜花", "怒放", "含苞", "孤单", "孤寂", "寂寞", "寥寂", "寂寥", "落寞", "孤独", "寂静", "僻静", "宁静", "寂然", "清静", "沉寂", "沉静", "安静", "孤立", "伶仃", "孤单", "零落", "落莫", "动静", "呼吸", "朝夕", "取舍", "善恶", "兴衰", "祸福", "甘苦", "彼此", "首尾", "褒贬", "吞吐", "黑白", "是非", "多少", "真假", "虚实", "反正", "生死", "悲欢", "前后", "始末", "早晚", "昼夜", "曲直", "东西", "善恶", "南北", "开关", "左右", "眷恋", "留恋", "依恋", "迷恋", "自恋", "爱恋", "失恋", "贪恋", "思恋", "热恋", "怀恋", "初恋", "顾恋", "流恋", "恋恋", "悲恋", "相恋", "婉恋", "忆恋", "积恋", "恳恋", "情恋", "凝恋", "耽恋", "欣恋", "绻恋", "感恋", "单恋", "遐恋", "嫪恋", "安恋", "慕恋", "兴奋", "快乐", "喜悦", "愉快", "畅快", "欢畅", "欢喜", "欢腾", "欢快", "欣喜", "激奋", "激昂", "激情", "敬佩", "佩服", "崇拜", "钦仰", "惊恐", "惊慌", "惊吓", "惧怕", "恐惧", "胆怯", "畏缩", "发慌", "心慌", "恐慌", "激怒", "恼火", "怒斥", "怒吼", "震怒", "气愤", "担忧", "发愁", "犯愁", "忧伤", "忧愁", "忧心", "愁闷", "悲伤", "悲痛", "悲惨", "悲凉", "哀伤", "哀怨", "忧伤", "伤感", "瘦削", "憔悴", "俊美", "恬静", "慈祥", "苍白", "白皙", "清秀", "光滑", "英俊", "红润", "挺直", "扁平", "小巧", "笔直", "端庄", "秀气", "秀美", "巧嘴", "朱唇", "苍白", "红润", "干裂", "娇嫩", "整齐", "整洁", "雪白", "焦黄", "洁净", "蓬松", "鲜嫩", "粉红", "通红", "红嫩", "滑润", "滋润", "干巴", "干裂", "干燥", "蜡黄", "洁白", "炭黑", "瘦弱", "矮小", "苗条", "丰满", "强壮", "清秀", "单薄", "文弱", "干瘦", "轩昂", "解释", "文辞", "短语", "单词", "词组", "词汇", "字眼", "范例", "语素", "丰富", "信息", "组成", "最小", "最大", "造句", "单位", "构成", "方式", "可以", "神奇", "单纯", "自由", "单音", "双音", "多音", "可以", "山高", "水深", "天高", "地厚", "拥有", "凑整", "仿佛", "苍茫", "参差", "上面", "前方", "内部", "中间", "方位", "学生", "老师", "群众", "老头", "妇女", "同志", "叔叔", "婶婶", "爸爸", "妈妈", "哥哥", "弟弟", "姐姐", "妹妹", "事物", "蜗牛", "猎豹", "棒球", "足球", "蓝求", "战机", "飞机", "地球", "思想", "中学", "物理", "科穴", "碗盘", "竹筷"];
    var last_name = first_name;

    function speck() {
        var i = Math.floor(Math.random() * (last_name.length));
        var j = Math.floor(Math.random() * (first_name.length));
        var k = Math.floor(Math.random() * (word.length));
        var r = '<li><span>' + last_name[i] + first_name[j] + '</span>' + word[k] + '</li>';
        return r;
    }


    function add() {
        $("ul").append(speck());
        var h = $("ul").height()
        $(".msg-box").scrollTop(h);
    }

    var t1 = null;

    function go(time) {
        t1 = window.setInterval(add, time);
    }

    function shutdown() {
        window.clearInterval(t1);
    }

    // go(3000);
    </script>
</body>

</html>